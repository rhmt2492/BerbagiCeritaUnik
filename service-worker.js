const CACHE_NAME="berbagicerita-v2",ASSETS_TO_CACHE=["/","/index.html","/assets/logo.png","/assets/fitur.png","/assets/placeholder-image.jpg","/manifest.json","/styles/styles.css","/scripts/app.js","/assets/placeholder-image.jpg"];self.addEventListener("install",(e=>{e.waitUntil(caches.open(CACHE_NAME).then((e=>e.addAll(ASSETS_TO_CACHE))).catch((e=>{console.error("Gagal caching di install:",e)})))})),self.addEventListener("activate",(e=>{e.waitUntil(caches.keys().then((e=>Promise.all(e.map((e=>{if(e!==CACHE_NAME)return caches.delete(e)}))))))})),self.addEventListener("fetch",(e=>{e.respondWith(caches.match(e.request).then((t=>t||fetch(e.request))).catch((()=>new Response("Offline atau file tidak ditemukan.",{status:503,statusText:"Service Unavailable"}))))})),self.addEventListener("push",(e=>{const t=e.data?.json()||{title:"Notifikasi Baru",body:"Anda memiliki notifikasi baru dari Berbagi Cerita",icon:"/assets/logo.png"};e.waitUntil(self.registration.showNotification(t.title,{body:t.body,icon:t.icon,vibrate:[200,100,200]}))})),self.addEventListener("notificationclick",(e=>{e.notification.close(),e.waitUntil(clients.openWindow("/"))}));